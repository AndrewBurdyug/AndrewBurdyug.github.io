<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="text">Blog Blog - Posts by Andrew Burdyug</title>
  <id>http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml</id>
  <updated>2016-05-04T00:00:00Z</updated>
  <link href="http://andrewburdyug.github.io/" />
  <link href="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml" rel="self" />
  <generator uri="http://ablog.readthedocs.org" version="0.8.3">ABlog</generator>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Сборка Nginx в Archlinux</title>
    <id>http://andrewburdyug.github.io/nginx-build-own-archlinux-package_ru/</id>
    <updated>2016-05-04T00:00:00Z</updated>
    <published>2016-05-04T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/nginx-build-own-archlinux-package_ru/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;nginx-archlinux&quot;&gt;

&lt;p&gt;Собираем пакет nginx для &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;Archlinux&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;section&quot; id=&quot;id1&quot;&gt;
&lt;h2&gt;Подготовка&lt;/h2&gt;
&lt;p&gt;Ставим &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;abs&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; pacman -S abs
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Заводим не &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;root&lt;/span&gt;&lt;/code&gt; аккаунт, под которым будем собирать пакет(рекомендации с how-to арча),
в нашем примере это &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;src&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; mkdir /var/abs/local
&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; useradd -d /var/abs/local -s /bin/bash src
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;id2&quot;&gt;
&lt;h2&gt;Сборка&lt;/h2&gt;
&lt;p&gt;Синкуем &lt;em&gt;abs-файлы&lt;/em&gt; nginx&amp;#8217;а:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; abs sync extra/nginx
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Starting ABS sync...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;receiving file list ... done&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;./&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;extra/&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;extra/nginx/&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;extra/nginx/PKGBUILD&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;extra/nginx/logrotate&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;extra/nginx/nginx.install&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;extra/nginx/service&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;sent 225 bytes  received 3,098 bytes  2,215.33 bytes/sec&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;total size is 4,874  speedup is 1.47&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; rm -rf /var/abs/local/nginx
&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; cp -r /var/abs/extra/nginx /var/abs/local
&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; chown -R src: /var/abs/local
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Переходим в пользовательское окружение &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;src&lt;/span&gt;&lt;/code&gt; юзера и редактируем &lt;em&gt;PKGBUILD&lt;/em&gt; (отключаем не нужное, добавляем нужное):&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; su - src
&lt;span class=&quot;gp&quot;&gt;[src@localhost ~]$&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; nginx
&lt;span class=&quot;gp&quot;&gt;[src@localhost nginx]$&lt;/span&gt; vi PKGBUILD
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Например, вот &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;diff&lt;/span&gt;&lt;/code&gt; моих изменений:&lt;/p&gt;
&lt;div class=&quot;highlight-diff&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gh&quot;&gt;diff -urN extra/nginx/PKGBUILD local/nginx/PKGBUILD&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;--- extra/nginx/PKGBUILD    2016-05-04 01:07:05.110678811 +0300&lt;/span&gt;
&lt;span class=&quot;gi&quot;&gt;+++ local/nginx/PKGBUILD    2016-05-04 11:54:37.003589198 +0300&lt;/span&gt;
&lt;span class=&quot;gu&quot;&gt;@@ -9,7 +9,7 @@&lt;/span&gt;
 pkgver=1.10.0
 pkgrel=2
 pkgdesc=&amp;#39;Lightweight HTTP server and IMAP/POP3 proxy server&amp;#39;
&lt;span class=&quot;gd&quot;&gt;-arch=(&amp;#39;i686&amp;#39; &amp;#39;x86_64&amp;#39;)&lt;/span&gt;
&lt;span class=&quot;gi&quot;&gt;+arch=(&amp;#39;x86_64&amp;#39;)&lt;/span&gt;
 url=&amp;#39;http://nginx.org&amp;#39;
 license=(&amp;#39;custom&amp;#39;)
 depends=(&amp;#39;pcre&amp;#39; &amp;#39;zlib&amp;#39; &amp;#39;openssl&amp;#39; &amp;#39;geoip&amp;#39;)
&lt;span class=&quot;gu&quot;&gt;@@ -32,28 +32,17 @@&lt;/span&gt;
          &amp;#39;19a26a61c8afe78defb8b4544f79a9a0&amp;#39;)

 _common_flags=(
&lt;span class=&quot;gd&quot;&gt;-  --with-ipv6&lt;/span&gt;
   --with-pcre-jit
   --with-file-aio
   --with-http_addition_module
   --with-http_auth_request_module
&lt;span class=&quot;gd&quot;&gt;-  --with-http_dav_module&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-  --with-http_degradation_module&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-  --with-http_flv_module&lt;/span&gt;
   --with-http_geoip_module
&lt;span class=&quot;gd&quot;&gt;-  --with-http_gunzip_module&lt;/span&gt;
   --with-http_gzip_static_module
&lt;span class=&quot;gd&quot;&gt;-  --with-http_mp4_module&lt;/span&gt;
   --with-http_realip_module
&lt;span class=&quot;gd&quot;&gt;-  --with-http_secure_link_module&lt;/span&gt;
   --with-http_ssl_module
   --with-http_stub_status_module
   --with-http_sub_module
   --with-http_v2_module
&lt;span class=&quot;gd&quot;&gt;-  --with-mail&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-  --with-mail_ssl_module&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-  --with-stream&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-  --with-stream_ssl_module&lt;/span&gt;
   --with-threads
 )
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Cобираем пакет:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[src@localhost nginx]$&lt;/span&gt; makepkg -cf
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Making package: nginx 1.10.0-2 (Wed May  4 11:55:12 MSK 2016)&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Checking runtime dependencies...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Checking buildtime dependencies...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Retrieving sources...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Downloading nginx-1.10.0.tar.gz...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;** Resuming transfer from byte position 491520&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;  %&lt;/span&gt; Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
&lt;span class=&quot;go&quot;&gt;                                 Dload  Upload   Total   Spent    Left  Speed&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;100  407k  100  407k    0     0  73915      0  0:00:05  0:00:05 --:--:-- 12290&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Found service&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Found logrotate&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Validating source files with md5sums...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;    nginx-1.10.0.tar.gz ... Passed&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;    service ... Passed&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;    logrotate ... Passed&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Extracting sources...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Extracting nginx-1.10.0.tar.gz with bsdtar&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Starting build()...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;checking for OS&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; + Linux 4.5.1-1-ARCH x86_64&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;checking for C compiler ... found&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; + using GNU C compiler&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;checking for -Wl,-E switch ... found&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;checking for gcc builtin atomic operations ... found&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;checking for C99 variadic macros ... found&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;checking for gcc variadic macros ... found&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;... ... ... ... ... ... ... ... ... ... ... ...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;... ... ... ... ... ... ... ... ... ... ... ...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;test -d &amp;#39;/var/abs/local/nginx/pkg/nginx/etc/nginx/html&amp;#39; \&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;|| cp -R html &amp;#39;/var/abs/local/nginx/pkg/nginx/etc/nginx&amp;#39;&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;make[1]: Leaving directory &amp;#39;/var/abs/local/nginx/src/nginx-1.10.0&amp;#39;&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Tidying install...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Removing libtool files...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Purging unwanted files...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Removing static library files...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Stripping unneeded symbols from binaries and libraries...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Compressing man and info pages...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Checking for packaging issue...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Creating package &amp;quot;nginx&amp;quot;...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Generating .PKGINFO file...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Generating .BUILDINFO file...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Adding install file...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Generating .MTREE file...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;  -&amp;gt; Compressing package...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Leaving fakeroot environment.&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Finished making: nginx 1.10.0-2 (Wed May  4 11:56:05 MSK 2016)&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;==&amp;gt; Cleaning up...&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;[src@localhost nginx]$&lt;/span&gt; ls -l
&lt;span class=&quot;go&quot;&gt;total 1256&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 src src    179 May  4 11:52 logrotate&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 src src 358316 May  4 11:56 nginx-1.10.0-2-x86_64.pkg.tar.xz&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 src src 908954 May  4 11:55 nginx-1.10.0.tar.gz&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 src src    945 May  4 11:52 nginx.install&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 src src   3119 May  4 11:54 PKGBUILD&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;-rw-r--r-- 1 src src    359 May  4 11:52 service&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;[src@localhost nginx]$&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;logout&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;nginx&quot;&gt;
&lt;h2&gt;Установка/Апгрейд nginx пакета&lt;/h2&gt;
&lt;p&gt;Устанавливаем/апргрейдим пакет &lt;em&gt;nginx&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; pacman -U /var/abs/local/nginx/nginx-1.10.0-2-x86_64.pkg.tar.xz
&lt;span class=&quot;go&quot;&gt;loading packages...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;resolving dependencies...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;looking for conflicting packages...&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;Package (1)  Old Version  New Version  Net Change&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;nginx        1.8.1-1      1.10.0-2       0.15 MiB&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;Total Installed Size:  1.10 MiB&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;Net Upgrade Size:      0.15 MiB&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;:: Proceed with installation? [Y/n] y&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;(1/1) checking keys in keyring                                                                                 [##################################################################] 100%&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;(1/1) checking package integrity                                                                               [##################################################################] 100%&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;(1/1) loading package files                                                                                    [##################################################################] 100%&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;(1/1) checking for file conflicts                                                                              [##################################################################] 100%&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;(1/1) checking available disk space                                                                            [##################################################################] 100%&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;:: Processing package changes...&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;(1/1) upgrading nginx                                                                                          [##################################################################] 100%&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;warning: /etc/nginx/fastcgi_params installed as /etc/nginx/fastcgi_params.pacnew&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Обращаем внимание на варнинги, смотрим изменения:&lt;/p&gt;
&lt;div class=&quot;highlight-diff&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gh&quot;&gt;diff -urN /etc/nginx/fastcgi_params /etc/nginx/fastcgi_params.pacnew&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;--- /etc/nginx/fastcgi_params   2012-06-27 22:03:10.000000000 +0400&lt;/span&gt;
&lt;span class=&quot;gi&quot;&gt;+++ /etc/nginx/fastcgi_params.pacnew    2016-05-04 11:56:03.000000000 +0300&lt;/span&gt;
&lt;span class=&quot;gu&quot;&gt;@@ -9,6 +9,7 @@&lt;/span&gt;
 fastcgi_param  DOCUMENT_URI       $document_uri;
 fastcgi_param  DOCUMENT_ROOT      $document_root;
 fastcgi_param  SERVER_PROTOCOL    $server_protocol;
&lt;span class=&quot;gi&quot;&gt;+fastcgi_param  REQUEST_SCHEME     $scheme;&lt;/span&gt;
 fastcgi_param  HTTPS              $https if_not_empty;

 fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
&lt;span class=&quot;gu&quot;&gt;@@ -22,19 +23,3 @@&lt;/span&gt;

 # PHP only, required if PHP was built with --enable-force-cgi-redirect
 fastcgi_param  REDIRECT_STATUS    200;
&lt;span class=&quot;gd&quot;&gt;-&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-# GeoIP Enabled&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_COUNTRY_CODE $geoip_country_code;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_COUNTRY_NAME $geoip_country_name;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_CITY_COUNTRY_CODE $geoip_city_country_code;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_CITY_COUNTRY_CODE3 $geoip_city_country_code3;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_CITY_COUNTRY_NAME $geoip_city_country_name;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_REGION $geoip_region;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_CITY $geoip_city;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_POSTAL_CODE $geoip_postal_code;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_CITY_CONTINENT_CODE $geoip_city_continent_code;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_LATITUDE $geoip_latitude;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_LONGITUDE $geoip_longitude;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_DMA_CODE $geoip_dma_code;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-fastcgi_param GEOIP_AREA_CODE $geoip_area_code;&lt;/span&gt;
&lt;span class=&quot;gd&quot;&gt;-&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;тут мы видим, что в &lt;em&gt;/etc/nginx/fastcgi_params.pacnew&lt;/em&gt; отстутствуют параметры &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;geoip&lt;/span&gt;&lt;/code&gt;,
которые я когда-то самостоятельно туда добавлял и есть важная добавка &lt;em&gt;REQUEST_SCHEME&lt;/em&gt;,
которую я внесу в свой &lt;em&gt;/etc/nginx/fastcgi_params&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;id3&quot;&gt;
&lt;h2&gt;Проверяем обновлённый nginx и перезапускаем сервис&lt;/h2&gt;
&lt;p&gt;Проверяем новый бинарник и конфигурацию:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; nginx -V
&lt;span class=&quot;go&quot;&gt;nginx version: nginx/1.10.0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;built with OpenSSL 1.0.2g  1 Mar 2016&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;TLS SNI support enabled&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;configure arguments: --prefix=/etc/nginx --conf-path=/etc/nginx/nginx.conf --sbin-path=/usr/bin/nginx --pid-path=/run/nginx.pid --lock-path=/run/lock/nginx.lock --user=http --group=http --http-log-path=/var/log/nginx/access.log --error-log-path=stderr --http-client-body-temp-path=/var/lib/nginx/client-body --http-proxy-temp-path=/var/lib/nginx/proxy --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --with-pcre-jit --with-file-aio --with-http_addition_module --with-http_auth_request_module --with-http_geoip_module --with-http_gzip_static_module --with-http_realip_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-threads&lt;/span&gt;

&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; nginx -t
&lt;span class=&quot;go&quot;&gt;nginx: the configuration file /etc/nginx/nginx.conf syntax is ok&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;nginx: configuration file /etc/nginx/nginx.conf test is successful&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;admonition warning&quot;&gt;
&lt;p class=&quot;first admonition-title&quot;&gt;Warning&lt;/p&gt;
&lt;p class=&quot;last&quot;&gt;Если у Вас уже есть установленный Nginx на сервере, настоятельно рекомендуется
проверить и учесть опции сборки текущей версии при сборки новой!&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Перезапускаем сервис:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; systemctl daemon-reload
&lt;span class=&quot;gp&quot;&gt;[root@localhost:~]#&lt;/span&gt; systemctl restart nginx
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Готово!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Manage container /etc/hosts</title>
    <id>http://andrewburdyug.github.io/docker-manage-container-etc-hosts/</id>
    <updated>2016-04-29T00:00:00Z</updated>
    <published>2016-04-29T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/docker-manage-container-etc-hosts/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;manage-container-etc-hosts&quot;&gt;

&lt;p&gt;See section &lt;a class=&quot;reference external&quot; href=&quot;https://docs.docker.com/engine/reference/run/&quot;&gt;Managing /etc/hosts&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker run -it --add-host db-static:86.75.30.9 ubuntu cat /etc/hosts
127.0.0.1   localhost
::1 localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
86.75.30.9  db-static
172.17.0.2  f0ab12b0b544
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">User defined networks</title>
    <id>http://andrewburdyug.github.io/docker-user-defined-networks/</id>
    <updated>2016-04-28T00:00:00Z</updated>
    <published>2016-04-28T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/docker-user-defined-networks/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;user-defined-networks&quot;&gt;

&lt;p&gt;See &lt;a class=&quot;reference external&quot; href=&quot;https://docs.docker.com/engine/userguide/networking/dockernetworks/#user-defined-networks&quot;&gt;User-defined networks&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Create a custom bridge with name &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;isolated_nw&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker network create -d bridge --subnet 172.31.0.0/16 isolated_nw
6b598ba1534223a1595c27b0c49d42115ec7c5f3ebea6dce4e2b220f086a3dcc
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Show all docker networks:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker network ls
NETWORK ID          NAME                DRIVER
ee9f284bd4b0        bridge              bridge
ca48e2b967ba        host                host
6b598ba15342        isolated_nw         bridge
a69dfefe6cf9        none                null
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Inspect &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;isolated_nw&lt;/span&gt;&lt;/code&gt; bridge:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker network inspect isolated_nw
[
    {
        &amp;quot;Name&amp;quot;: &amp;quot;isolated_nw&amp;quot;,
        &amp;quot;Id&amp;quot;: &amp;quot;6b598ba1534223a1595c27b0c49d42115ec7c5f3ebea6dce4e2b220f086a3dcc&amp;quot;,
        &amp;quot;Scope&amp;quot;: &amp;quot;local&amp;quot;,
        &amp;quot;Driver&amp;quot;: &amp;quot;bridge&amp;quot;,
        &amp;quot;EnableIPv6&amp;quot;: false,
        &amp;quot;IPAM&amp;quot;: {
            &amp;quot;Driver&amp;quot;: &amp;quot;default&amp;quot;,
            &amp;quot;Options&amp;quot;: {},
            &amp;quot;Config&amp;quot;: [
                {
                    &amp;quot;Subnet&amp;quot;: &amp;quot;172.31.0.0/16&amp;quot;
                }
            ]
        },
        &amp;quot;Internal&amp;quot;: false,
        &amp;quot;Containers&amp;quot;: {},
        &amp;quot;Options&amp;quot;: {},
        &amp;quot;Labels&amp;quot;: {}
    }
]
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Create a new container with IP from our network:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker run --net=isolated_nw --ip=172.31.1.1 -itd ubuntu bash
e7fd3a525d804c5d08d8b5fdb2d971705c83877c2c4b420a140203766b6a0f2e

$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
e7fd3a525d80        ubuntu              &amp;quot;bash&amp;quot;              2 seconds ago       Up 2 seconds                            evil_almeida
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Inspect again our &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;isolated_nw&lt;/span&gt;&lt;/code&gt; bridge:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker network inspect isolated_nw
[
    {
        &amp;quot;Name&amp;quot;: &amp;quot;isolated_nw&amp;quot;,
        &amp;quot;Id&amp;quot;: &amp;quot;6b598ba1534223a1595c27b0c49d42115ec7c5f3ebea6dce4e2b220f086a3dcc&amp;quot;,
        &amp;quot;Scope&amp;quot;: &amp;quot;local&amp;quot;,
        &amp;quot;Driver&amp;quot;: &amp;quot;bridge&amp;quot;,
        &amp;quot;EnableIPv6&amp;quot;: false,
        &amp;quot;IPAM&amp;quot;: {
            &amp;quot;Driver&amp;quot;: &amp;quot;default&amp;quot;,
            &amp;quot;Options&amp;quot;: {},
            &amp;quot;Config&amp;quot;: [
                {
                    &amp;quot;Subnet&amp;quot;: &amp;quot;172.31.0.0/16&amp;quot;
                }
            ]
        },
        &amp;quot;Internal&amp;quot;: false,
        &amp;quot;Containers&amp;quot;: {
            &amp;quot;e7fd3a525d804c5d08d8b5fdb2d971705c83877c2c4b420a140203766b6a0f2e&amp;quot;: {
                &amp;quot;Name&amp;quot;: &amp;quot;evil_almeida&amp;quot;,
                &amp;quot;EndpointID&amp;quot;: &amp;quot;6e5b4f3a3603de5f2e8e132603e7edc6f046158fb7892a9545ef8a188a95e618&amp;quot;,
                &amp;quot;MacAddress&amp;quot;: &amp;quot;02:42:ac:1f:01:01&amp;quot;,
                &amp;quot;IPv4Address&amp;quot;: &amp;quot;172.31.1.1/16&amp;quot;,
                &amp;quot;IPv6Address&amp;quot;: &amp;quot;&amp;quot;
            }
        },
        &amp;quot;Options&amp;quot;: {},
        &amp;quot;Labels&amp;quot;: {}
    }
]
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Nginx Try Files Tricks</title>
    <id>http://andrewburdyug.github.io/nginx-try-files-tricks/</id>
    <updated>2016-03-15T00:00:00Z</updated>
    <published>2016-03-15T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/nginx-try-files-tricks/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;nginx-try-files-tricks&quot;&gt;

&lt;p&gt;Nginx has many good things, the most interesting what I recently done with him,
it is configure him for serving content, which may be in different places: &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;default&lt;/span&gt;&lt;/code&gt;
and &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;custom&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;section&quot; id=&quot;the-idea&quot;&gt;
&lt;h2&gt;The idea&lt;/h2&gt;
&lt;p&gt;For example we have a project which will be distributed with default web theme,
but we want also have a possibility for applying a custom web theme,
changing everything from &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;css&lt;/span&gt;&lt;/code&gt; and &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;js&lt;/span&gt;&lt;/code&gt; things or even &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;html&lt;/span&gt;&lt;/code&gt; pages.&lt;/p&gt;
&lt;p&gt;This should work in this way. For example we have two folders &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;/path/to/default&lt;/span&gt;&lt;/code&gt;
and &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;/path/to/custom&lt;/span&gt;&lt;/code&gt;, then when we will request a file(e.g. style.css):&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;css&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HTTP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HTTP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;server should return content of &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;style.css&lt;/span&gt;&lt;/code&gt; if this file exists in
&lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;/path/to/custom&lt;/span&gt;&lt;/code&gt; (override default content of style.css),
otherwise it will return content of &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;/path/to/default/style.css&lt;/span&gt;&lt;/code&gt;. Likewise,
this should work for &lt;em&gt;.js&lt;/em&gt;, &lt;em&gt;.html&lt;/em&gt; and other types of files, except requests to API endpoints.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;implementation&quot;&gt;
&lt;h2&gt;Implementation&lt;/h2&gt;
&lt;p&gt;Here is an example of such nginx configuration(we used &lt;a class=&quot;reference external&quot; href=&quot;http://nginx.org/ru/docs/http/ngx_http_core_module.html#try_files&quot;&gt;try_files&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;highlight-nginx&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;server_name&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;example.org&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@default_content&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;try_files&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri/index.html&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri.html&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;404&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/usr/share/nginx/html/example.org/default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;internal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;try_files&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri/index.html&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$uri.html&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@default_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/usr/share/nginx/html/example.org/custom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kn&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/api&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_redirect&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://localhost:8000/api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Host&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-Forwarded-For&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$proxy_add_x_forwarded_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$scheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_http_version&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kn&quot;&gt;proxy_intercept_errors&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I used this on &lt;a class=&quot;reference external&quot; href=&quot;https://github.com/AndrewBurdyug/makechat&quot;&gt;makechat&lt;/a&gt;, works pretty well =)&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Mysql Innodb Settings For SSD</title>
    <id>http://andrewburdyug.github.io/mysql-innodb-settings-for-ssd/</id>
    <updated>2016-05-01T00:00:00Z</updated>
    <published>2014-09-28T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/mysql-innodb-settings-for-ssd/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;mysql-innodb-settings-for-ssd&quot;&gt;

&lt;p&gt;If you have server with SSD hard, you can face the fact that the MySQL very slowly
writes, help these settings adjustment:&lt;/p&gt;
&lt;div class=&quot;highlight-ini&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;[mysqld]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;innodb_buffer_pool_instances&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;innodb_read_io_threads&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;innodb_write_io_threads&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;innodb_buffer_pool_size&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;64M&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;innodb_io_capacity&lt;/span&gt;              &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;1000&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;; innodb_file_per_table&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;save this into  &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;/etc/mysql/conf.d/tuning.cnf&lt;/span&gt;&lt;/code&gt; and restart MySQL server.
The most important of these settings is &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;innodb_io_capacity&lt;/span&gt;&lt;/code&gt;,
here what about it says mysql docs:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div&gt;&lt;p&gt;The innodb_io_capacity parameter sets an upper limit on the I/O activity
performed by the InnoDB background tasks, such as flushing pages from the
buffer pool and merging data from the change buffer. The default value is 200.
For busy systems capable of higher I/O rates, you can set a higher value at
server startup, to help the server handle the background maintenance work
associated with a high rate of row changes.&lt;/p&gt;
&lt;p&gt;The innodb_io_capacity limit is a total limit for all buffer pool instances.
When dirty pages are flushed, the innodb_io_capacity limit is divided equally
among buffer pool instances.&lt;/p&gt;
&lt;p&gt;As of MySQL 5.7.2, the innodb_io_capacity setting is also used to limit
the number of buffer pool load operations per second when there is other I/O
activity being performed by InnoDB background tasks.&lt;/p&gt;
&lt;p&gt;For systems with individual 5400 RPM or 7200 RPM drives, you might lower the
value to the former default of 100.&lt;/p&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;These values were tested on &lt;a class=&quot;reference external&quot; href=&quot;https://www.linode.com/&quot;&gt;Linode&lt;/a&gt; VM with SSD and 4Gb of RAM.
&lt;a class=&quot;reference external&quot; href=&quot;https://www.linode.com/&quot;&gt;Linode&lt;/a&gt; ssd servers have a very good performance, here output of &lt;code class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;atop&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;1&lt;/span&gt;&lt;/code&gt;
during the converting big database(180 millions of rows) to InnoDb:&lt;/p&gt;
&lt;div class=&quot;highlight-console&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;DSK |          xvda  | busy     21%  |  read      31  |  write   4306 |  KiB/w     33  |  MBr/s   1.25  |  MBw/s 139.93 |  avio 0.05 ms  |&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;admonition note&quot;&gt;
&lt;p class=&quot;first admonition-title&quot;&gt;Note&lt;/p&gt;
&lt;p&gt;To convert a non-InnoDB table to use InnoDB use ALTER TABLE:&lt;/p&gt;
&lt;div class=&quot;last highlight-sql&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table_name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InnoDB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;note update admonition&quot;&gt;
&lt;p class=&quot;first admonition-title&quot;&gt;Updated on May 01, 2016&lt;/p&gt;
&lt;p class=&quot;last&quot;&gt;Added notes about MySQL 5.7.2&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Сборка Nginx в Debian/Ubuntu</title>
    <id>http://andrewburdyug.github.io/nginx-build-own-deb-package_ru/</id>
    <updated>2014-02-17T00:00:00Z</updated>
    <published>2014-02-17T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/nginx-build-own-deb-package_ru/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;nginx-debian-ubuntu&quot;&gt;

&lt;p&gt;Заходим на &lt;a class=&quot;reference external&quot; href=&quot;http://nginx.org/ru/linux_packages.html&quot;&gt;nginx.org/ru/linux_packages.html&lt;/a&gt;
и следуя инструкциям добавляем реп Сысоева И.В., например для Ubuntu 14.04:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deb&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;packages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubuntu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trusty&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;deb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;packages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ubuntu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trusty&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Качаем и импортируем ключ, которым подписаны пакеты с репа Сысоева И.В.:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wget&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nginx_signing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;apt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nginx_signing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Обновляем список пакетов:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ставим нужное для сборки:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpkg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;devscripts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;essential&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fakeroot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;debhelper&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;libssl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;libpcre3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zlib1g&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Получаем исходники пакета:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;apt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Переходим в директорию файлов nginx&amp;#8217;а (зависит от версии),
например у меня на момент написания этого мануала:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Редактируем &lt;em&gt;debian/rules&lt;/em&gt;: добавляем то, что надо и удаляем лишнее - то что Вам явно не надо,
например поддержку ipv6, стриминг и т.д.&lt;/p&gt;
&lt;p&gt;Собираем пакет:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debuild&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;us&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Переходим в родительскую папку и ставим пакет:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dpkg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nginx_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;6.1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trusty_amd64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Смена кодировки в MySQL</title>
    <id>http://andrewburdyug.github.io/mysql-character-set_ru/</id>
    <updated>2013-09-25T00:00:00Z</updated>
    <published>2013-09-25T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/mysql-character-set_ru/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;mysql&quot;&gt;

&lt;p&gt;Чтобы переключить кодировку на &lt;em&gt;utf-8&lt;/em&gt;, создайте файлик &lt;em&gt;charset.cnf&lt;/em&gt; в &lt;em&gt;/etc/mysql/conf.d/&lt;/em&gt;
и добавьте в него следующее:&lt;/p&gt;
&lt;div class=&quot;highlight-ini&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;[client]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;default-character-set&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf8&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;[mysqld]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;collation-server&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf8_general_ci&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;init-connect&lt;/span&gt;            &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;SET NAMES utf8&amp;#39;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;character-set-server&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf8&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;[mysql]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;default-character-set&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Проверить кодировки таблиц перед переключением на utf8_general_ci можно так:&lt;/p&gt;
&lt;div class=&quot;highlight-sql&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SHOW&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;STATUS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;databasename&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Collation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;utf8_general_ci&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Поменять кодировку в текущей базе можно так:&lt;/p&gt;
&lt;div class=&quot;highlight-sql&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;databasename&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utf8&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COLLATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utf8_general_ci&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tablename&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONVERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utf8&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COLLATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utf8_general_ci&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  <entry xml:base="http://andrewburdyug.github.io/blog/author/andrew-burdyug/atom.xml">
    <title type="text">Git: советы и приёмы</title>
    <id>http://andrewburdyug.github.io/git-tips-and-tricks_ru/</id>
    <updated>2013-09-02T00:00:00Z</updated>
    <published>2013-09-02T00:00:00Z</published>
    <link href="http://andrewburdyug.github.io/git-tips-and-tricks_ru/" />
    <author>
      <name>Andrew Burdyug</name>
    </author>
    <content type="html">&lt;div class=&quot;section&quot; id=&quot;git&quot;&gt;

&lt;p&gt;Пушнуть текущую локальную ветку в новую удалённую:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Стянуть удалённую ветку в локальную и перейти в неё:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;checkout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;или сокращённый вариант:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;checkout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_branch_name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_branch_name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Чтобы пушило автоматом на удалённый сервер в текущую ветку:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Поменять url репозитория в локальной рабочей копии проекта:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remote&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;here&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Удалить ветку на удалённом репозитории:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Удалить(локально) мёртвые ветки, которых на удалённом сервере уже нет:&lt;/p&gt;
&lt;div class=&quot;highlight-default&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
</feed>
