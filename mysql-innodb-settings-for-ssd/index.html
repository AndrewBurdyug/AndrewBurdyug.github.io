<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mysql Innodb Settings For SSD &mdash; Blog  documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about/" />
    <link rel="top" title="Blog  documentation" href="../" />
  
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
  <link rel="alternate" type="application/atom+xml"  href="../blog/atom.xml" title="Blog Blog">
  
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet">
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mysql-innodb-settings-for-ssd">
<h1>Mysql Innodb Settings For SSD<a class="headerlink" href="#mysql-innodb-settings-for-ssd" title="Permalink to this headline">¶</a></h1>
<p>If you have server with SSD hard, you can face the fact that the MySQL very slowly
writes, help these settings adjustment:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[mysqld]</span>
<span class="na">innodb_buffer_pool_instances</span>    <span class="o">=</span> <span class="s">8</span>
<span class="na">innodb_read_io_threads</span>          <span class="o">=</span> <span class="s">8</span>
<span class="na">innodb_write_io_threads</span>         <span class="o">=</span> <span class="s">8</span>
<span class="na">innodb_buffer_pool_size</span>         <span class="o">=</span> <span class="s">64M</span>
<span class="na">innodb_io_capacity</span>              <span class="o">=</span> <span class="s">1000</span>
<span class="c1">; innodb_file_per_table</span>
</pre></div>
</div>
<p>save this into  <code class="docutils literal"><span class="pre">/etc/mysql/conf.d/tuning.cnf</span></code> and restart MySQL server.
The most important of these settings is <code class="docutils literal"><span class="pre">innodb_io_capacity</span></code>,
here what about it says mysql docs:</p>
<blockquote>
<div><p>The innodb_io_capacity parameter sets an upper limit on the I/O activity
performed by the InnoDB background tasks, such as flushing pages from the
buffer pool and merging data from the change buffer. The default value is 200.
For busy systems capable of higher I/O rates, you can set a higher value at
server startup, to help the server handle the background maintenance work
associated with a high rate of row changes.</p>
<p>The innodb_io_capacity limit is a total limit for all buffer pool instances.
When dirty pages are flushed, the innodb_io_capacity limit is divided equally
among buffer pool instances.</p>
<p>As of MySQL 5.7.2, the innodb_io_capacity setting is also used to limit
the number of buffer pool load operations per second when there is other I/O
activity being performed by InnoDB background tasks.</p>
<p>For systems with individual 5400 RPM or 7200 RPM drives, you might lower the
value to the former default of 100.</p>
</div></blockquote>
<p>These values were tested on <a class="reference external" href="https://www.linode.com/">Linode</a> VM with SSD and 4Gb of RAM.
<a class="reference external" href="https://www.linode.com/">Linode</a> ssd servers have a very good performance, here output of <code class="docutils literal"><span class="pre">atop</span> <span class="pre">-s</span> <span class="pre">1</span></code>
during the converting big database(180 millions of rows) to InnoDb:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">DSK |          xvda  | busy     21%  |  read      31  |  write   4306 |  KiB/w     33  |  MBr/s   1.25  |  MBw/s 139.93 |  avio 0.05 ms  |</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To convert a non-InnoDB table to use InnoDB use ALTER TABLE:</p>
<div class="last highlight-sql"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="note update admonition">
<p class="first admonition-title">Updated on May 01, 2016</p>
<p class="last">Added notes about MySQL 5.7.2</p>
</div>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  
  <a href="../nginx-build-own-deb-package_ru/">
    <i class="fa fa-arrow-circle-left"></i>
    Сборка Nginx в Debian/Ubuntu
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  
  <a href="../nginx-try-files-tricks/">
    Nginx Try Files Tricks
    <i class="fa fa-arrow-circle-right"></i>
  </a>
  </span>
  
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'andrewburdyugblog';
        var disqus_identifier = '/mysql-innodb-settings-for-ssd/';
        var disqus_title = 'Mysql Innodb Settings For SSD';
        var disqus_url = 'http://andrewburdyug.github.io/mysql-innodb-settings-for-ssd';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../">Blog</a></h1>









  
  
  <h2>
  
  <i class="fa fa-calendar"></i>
    Sep 28, 2014
  
  </h2>

  <ul>
    
  <li><i class="fa fa-pencil-square-o"></i>
    May 01, 2016</li>
  

  
  <li><i class="fa-fw fa fa-user"></i>
    
      
      <a href="../blog/author/andrew-burdyug/">Andrew Burdyug</a>
      
    </li>
  

  

  

  
  <li><i class="fa-fw fa fa-folder-open"></i>
    
      
      <a href="../blog/category/tuning/">tuning</a>
      
    </li>
  

  
  <li><i class="fa-fw fa fa-tags"></i>
      
    
      
      <a href="../blog/tag/mysql/">mysql</a>,
      
    
      
      <a href="../blog/tag/innodb/">innodb</a>,
      
    
      
      <a href="../blog/tag/ssd/">ssd</a>
      
    </li>
  
  
  <li>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'andrewburdyugblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    <i class="fa-fw fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/mysql-innodb-settings-for-ssd/"> </a>
  </li>
  
  </ul>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/">About me</a></li>
</ul>


  <h3><a href="../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../nginx-build-own-archlinux-package_ru/">May 04 - Сборка Nginx в Archlinux</a></li>
    
      <li><a href="../docker-manage-container-etc-hosts/">Apr 29 - Manage container /etc/hosts</a></li>
    
      <li><a href="../docker-user-defined-networks/">Apr 28 - User defined networks</a></li>
    
      <li><a href="../nginx-try-files-tricks/">Mar 15 - Nginx Try Files Tricks</a></li>
    
      <li><a href="../nginx-build-own-deb-package_ru/">Feb 17 - Сборка Nginx в Debian/Ubuntu</a></li>
    
  </ul>

  <h3><a href="../blog/tag/">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/archlinux/">archlinux</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/debian/">debian</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../blog/tag/docker/">docker</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/git/">git</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/innodb/">innodb</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../blog/tag/mysql/">mysql</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../blog/tag/nginx/">nginx</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/ssd/">ssd</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/utf-8/">utf-8</a></li>
      
    
  </ul>

  <h3><a href="../blog/category/">Categories</a></h3>
  <ul>
  
    
    <li><a href="../blog/category/build-package/">build package (2)</a></li>
    
  
    
    <li><a href="../blog/category/tricks/">tricks (1)</a></li>
    
  
    
    <li><a href="../blog/category/tuning/">tuning (1)</a></li>
    
  
  </ul>

  <h3><a href="../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../blog/2016/">2016 (4)</a></li>
    
  
    
    <li><a href="../blog/2014/">2014 (2)</a></li>
    
  
    
    <li><a href="../blog/2013/">2013 (2)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Andrew Burdyug.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="../_sources/mysql-innodb-settings-for-ssd.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-77253587-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>